{% extends "base.html" %}
{% load wagtailcore_tags %}

{% block content %}
<!-- Hero Section -->
<section class="page-hero">
    <div class="hero-bg-pattern"></div>
    <div class="container">
        <div class="hero-content">
            <nav aria-label="breadcrumb" class="hero-breadcrumb mb-3">
                <ol class="breadcrumb justify-content-center mb-0">
                    <li class="breadcrumb-item"><a href="/"><i class="bi bi-house"></i></a></li>
                    <li class="breadcrumb-item"><a href="{% pageurl page.get_parent %}">{{ page.get_parent.title }}</a></li>
                    <li class="breadcrumb-item active" aria-current="page">{{ page.title|truncatewords:5 }}</li>
                </ol>
            </nav>
            
            <div class="text-center">
                <div class="hero-meta mb-3">
                    <span class="hero-meta-item">
                        <i class="bi bi-calendar3 me-1"></i>
                        {{ page.date|date:"d.m.Y" }}
                    </span>
                    <span class="hero-meta-tag">{{ page.doc_type.name|default:"Інше" }}</span>
                    <span class="hero-meta-tag">{{ page.year }} рік</span>
                </div>
                <h1 class="hero-title">{{ page.title }}</h1>
            </div>
        </div>
    </div>
    <div class="hero-wave">
        <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
            <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V120H0V95.8C57.1,118.92,156.63,69.08,321.39,56.44Z" fill="var(--gray-50)"/>
        </svg>
    </div>
</section>

<section class="document-content-section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                {% if page.description %}
                    <div class="document-description-card">
                        <div class="card-icon">
                            <i class="bi bi-info-circle"></i>
                        </div>
                        <h5>Опис документу</h5>
                        <div class="content-body">
                            {{ page.description|richtext }}
                        </div>
                    </div>
                {% endif %}

                {% if page.doc_file %}
                    <div class="document-download-card">
                        <div class="download-icon">
                            <i class="bi bi-file-earmark-pdf"></i>
                        </div>
                        <h5>{{ page.doc_file.title }}</h5>
                        <p class="file-size">
                            <i class="bi bi-hdd me-1"></i>
                            {{ page.doc_file.file.size|filesizeformat }}
                        </p>
                        <a class="btn btn-primary-custom btn-lg" href="{{ page.doc_file.url }}" target="_blank" rel="noopener">
                            <i class="bi bi-download me-2"></i>Завантажити документ
                        </a>
                    </div>
                {% else %}
                    <div class="alert alert-warning d-flex align-items-center">
                        <i class="bi bi-exclamation-triangle me-2"></i>
                        Файл для цього документу ще не додано.
                    </div>
                {% endif %}

                {% if page.tags.all %}
                    <div class="document-tags">
                        <i class="bi bi-tags me-2"></i>
                        {% for tag in page.tags.all %}
                            <span class="tag-badge">{{ tag.name }}</span>
                        {% endfor %}
                    </div>
                {% endif %}

                <div class="document-footer">
                    <a href="{% pageurl page.get_parent %}" class="btn btn-primary-custom">
                        <i class="bi bi-arrow-left me-2"></i>Назад до документів
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
.document-content-section {
    background: var(--gray-50);
    padding: 3rem 0 5rem;
    margin-top: -2px;
}

.document-description-card {
    background: var(--white);
    border-radius: 16px;
    padding: 2rem;
    margin-bottom: 1.5rem;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
}

.document-description-card .card-icon {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.25rem;
    margin-bottom: 1rem;
}

.document-description-card h5 {
    color: var(--primary);
    font-weight: 700;
    margin-bottom: 1rem;
}

.document-description-card .content-body {
    color: var(--gray-700);
    line-height: 1.8;
}

.document-download-card {
    background: var(--white);
    border-radius: 16px;
    padding: 2.5rem;
    text-align: center;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    border: 2px solid var(--primary);
}

.document-download-card .download-icon {
    font-size: 4rem;
    color: #dc3545;
    margin-bottom: 1rem;
}

.document-download-card h5 {
    color: var(--primary);
    font-weight: 700;
    margin-bottom: 0.5rem;
}

.document-download-card .file-size {
    color: var(--gray-600);
    margin-bottom: 1.5rem;
}

.document-tags {
    margin-top: 1.5rem;
    color: var(--gray-600);
}

.document-tags .tag-badge {
    display: inline-block;
    padding: 0.35rem 0.75rem;
    background: var(--primary);
    color: white;
    border-radius: 50px;
    font-size: 0.85rem;
    margin-right: 0.5rem;
}

.document-footer {
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--gray-200);
}
</style>
{% endblock %}
