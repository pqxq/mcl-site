{% extends "base.html" %}
{% load wagtailcore_tags %}

{% block content %}
<!-- Hero Section -->
<section class="page-hero">
    <div class="hero-bg-pattern"></div>
    <div class="container">
        <div class="hero-content text-center">
            <span class="hero-badge">
                <i class="bi bi-mortarboard me-2"></i>Вступ
            </span>
            <h1 class="hero-title">{{ page.title }}</h1>
            {% if page.intro %}
            <div class="hero-subtitle">{{ page.intro|striptags|truncatewords:25 }}</div>
            {% endif %}
        </div>
    </div>
    <div class="hero-wave">
        <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
            <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V120H0V95.8C57.1,118.92,156.63,69.08,321.39,56.44Z" fill="var(--gray-50)"/>
        </svg>
    </div>
</section>

<!-- Application Form Section -->
<section class="application-section">
    <div class="container">
        <div class="row">
            {% if page.rules_text %}
            <div class="col-lg-4 mb-4 mb-lg-0">
                <div class="rules-card sticky-top" style="top: 100px;">
                    <div class="rules-header">
                        <i class="bi bi-info-circle"></i>
                        <h3>Правила вступу</h3>
                    </div>
                    <div class="rules-content">
                        {{ page.rules_text|richtext }}
                    </div>
                </div>
            </div>
            {% endif %}
            
            <div class="{% if page.rules_text %}col-lg-8{% else %}col-lg-8 mx-auto{% endif %}">
                {% if page.intro %}
                <div class="intro-text">
                    {{ page.intro|richtext }}
                </div>
                {% endif %}

                <div class="form-card">
                    <div class="form-card-header">
                        <i class="bi bi-pencil-square"></i>
                        <span>Заповніть форму</span>
                    </div>
                    <form action="{% pageurl page %}" method="POST">
                        {% csrf_token %}

                        {% if form.non_field_errors %}
                        <div class="alert alert-danger" role="alert">
                            {% for error in form.non_field_errors %}
                            {{ error }}
                            {% endfor %}
                        </div>
                        {% endif %}

                        {% for field in form %}
                        <div class="form-group">
                            <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
                            {% if field.help_text %}
                            <div class="form-hint">{{ field.help_text }}</div>
                            {% endif %}

                            {{ field }}

                            {% if field.errors %}
                            <div class="invalid-feedback d-block">
                                {% for error in field.errors %}
                                {{ error }}
                                {% endfor %}
                            </div>
                            {% endif %}
                        </div>
                        {% endfor %}

                        <div class="form-submit">
                            <button type="submit" class="btn btn-primary-custom btn-lg">
                                <i class="bi bi-send me-2"></i>Надіслати заявку
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}