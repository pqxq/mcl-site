{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block content %}
<!-- Hero Section -->
<section class="page-hero page-hero-sm">
    <div class="hero-bg-pattern"></div>
    <div class="container">
        <nav aria-label="breadcrumb" class="mb-3">
            <ol class="breadcrumb justify-content-center mb-0">
                <li class="breadcrumb-item"><a href="/" class="text-white-50"><i class="bi bi-house"></i></a></li>
                <li class="breadcrumb-item"><a href="{{ page.get_parent.url }}" class="text-white-50">–ö–æ–ª–µ–∫—Ç–∏–≤</a></li>
                <li class="breadcrumb-item active text-white" aria-current="page">{{ page.title }}</li>
            </ol>
        </nav>
    </div>
    <div class="hero-wave">
        <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
            <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V120H0V95.8C57.1,118.92,156.63,69.08,321.39,56.44Z" fill="var(--gray-50)"/>
        </svg>
    </div>
</section>

<section class="person-content-section">
<div class="container">
    <div class="person-profile-card shadow-lg border-0 bg-white overflow-hidden">
        <div class="row g-0">
            <div class="col-lg-4 bg-white d-flex align-items-center justify-content-center p-4">
                <div class="profile-portrait-wrapper" style="width: 100%; max-width: 320px;">
                    {% if page.photo %}
                    {% image page.photo fill-400x400 as photo %}
                    <img src="{{ photo.url }}" class="profile-photo w-100" alt="{{ page.title }}">
                    {% else %}
                    <div class="profile-photo-placeholder d-flex align-items-center justify-content-center w-100" style="aspect-ratio: 1;">
                        <span class="display-1">üë§</span>
                    </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-lg-8 p-5">
                <div class="fade-in">
                    <h1 class="h2 fw-bold mb-3 text-primary">{{ page.title }}</h1>
                    
                    <div class="mb-4">
                        <span class="badge position-badge px-4 py-2 rounded-pill" style="font-size:0.95rem;">{{ page.position }}</span>
                        {% if page.department %}
                        <span class="badge bg-secondary px-3 py-2 rounded-pill ms-2" style="font-size:0.85rem;">{{ page.department }}</span>
                        {% endif %}
                    </div>

                    {% if page.subjects.all %}
                    <div class="mb-5">
                        <small class="text-muted text-uppercase fw-bold d-block mb-2"
                            style="letter-spacing: 0.05em; font-size: 0.75rem;">–ü—Ä–µ–¥–º–µ—Ç–∏</small>
                        <div class="d-flex flex-wrap gap-2">
                            {% for item in page.subjects.all %}
                            <span class="badge subject-badge px-3 py-2 rounded-pill">
                                <i class="bi bi-book me-2"></i>{{ item.name }}
                            </span>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}

                    <div class="row mb-5 g-3">
                        {% if page.education %}
                        <div class="col-md-4">
                            <div class="info-card d-flex flex-column h-100">
                                <div class="text-primary mb-2"><i class="bi bi-mortarboard-fill fs-5"></i></div>
                                <small class="text-muted text-uppercase fw-bold d-block mb-2"
                                    style="letter-spacing: 0.05em; font-size: 0.7rem;">–û—Å–≤—ñ—Ç–∞</small>
                                <span class="text-dark fw-500 flex-grow-1">{{ page.education }}</span>
                            </div>
                        </div>
                        {% endif %}

                        {% if page.category %}
                        <div class="col-md-4">
                            <div class="info-card d-flex flex-column h-100">
                                <div class="text-primary mb-2"><i class="bi bi-award-fill fs-5"></i></div>
                                <small class="text-muted text-uppercase fw-bold d-block mb-2"
                                    style="letter-spacing: 0.05em; font-size: 0.7rem;">–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</small>
                                <span class="text-dark fw-500 flex-grow-1">{{ page.category }}</span>
                            </div>
                        </div>
                        {% endif %}

                        {% if page.experience %}
                        <div class="col-md-4">
                            <div class="info-card d-flex flex-column h-100">
                                <div class="text-primary mb-2"><i class="bi bi-clock-fill fs-5"></i></div>
                                <small class="text-muted text-uppercase fw-bold d-block mb-2"
                                    style="letter-spacing: 0.05em; font-size: 0.7rem;">–°—Ç–∞–∂</small>
                                <span class="text-dark fw-500 flex-grow-1">{{ page.experience }}</span>
                            </div>
                        </div>
                        {% endif %}
                    </div>

                    {% if page.bio %}
                    <div class="bio-content mb-5" style="line-height: 1.8; color: #555;">
                        {{ page.bio|richtext }}
                    </div>
                    {% endif %}

                    <div>
                        <a href="{{ page.get_parent.url }}" class="btn btn-primary-custom rounded-pill px-4 py-2">
                            <i class="bi bi-arrow-left me-2"></i>
                            –î–æ —Å–ø–∏—Å–∫—É
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</section>

<style>
    .person-content-section {
        background: var(--gray-50);
        padding: 3rem 0 5rem;
        margin-top: -2px;
    }

    .person-profile-card {
        border-radius: 20px;
        position: relative;
        z-index: 10;
        min-height: 500px;
    }

    .profile-portrait-wrapper {
        width: 100%;
        max-width: 300px;
        aspect-ratio: 1;
        position: relative;
    }

    @media (max-width: 991.98px) {
        .profile-portrait-wrapper {
            max-width: 200px;
            margin: 0 auto;
        }
        .person-profile-card {
            margin-top: -2rem;
        }
    }
</style>
{% endblock %}